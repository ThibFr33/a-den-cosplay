<div class="container mt-5">
  <div class="event-card">
    <div class="card-body">
      <div id="event-carousel">
        <%= render "layouts/event_carousel", event: @event %>
        <%# delete_path: ->(event, attachment) { photo_event_path(event, attachment.id) } %>
      </div>
      <h1><%= @event.name %></h1>
          <% if user_signed_in? && (current_user.admin?) %>
            <button type="button"
                    class="btn btn-dark btn-sm rounded-circle shadow ms-2"
                    data-bs-toggle="modal"
                    data-bs-target="#addEventPhotoModal"
                    title="Ajouter une photo">
              <i class="fa-solid fa-camera"></i>
            </button>
          <% end %>
          <% if user_signed_in? && current_user.admin? %>
            <div  class="admin-btns">
              <%= link_to edit_event_path(@event),
                    class: "btn btn-warning me-2" do %>
                <i class="fa-solid fa-pen"></i> Modifier
              <% end %>
            <% end %>

            <% if user_signed_in? && current_user.admin? %>
              <%= button_to event_path(@event),
                    method: :delete,
                    data: { turbo_confirm: "Supprimer cet événement et toutes ses photos ? Action irréversible." },
                    class: "btn btn-danger me-2" do %>
                <i class="fa-solid fa-trash"></i> Supprimer
              <% end %>
            </div>
          <% end %>



      <p class="mt-3">
        <strong>Date :</strong>
        <%= l(@event.start_date, format: :long) %>
        <% if @event.end_date && @event.end_date != @event.start_date %>
          au <%= l(@event.end_date, format: :long) %>
        <% end %>
      </p>

      <% if @event.localisation.present? %>
        <p><strong>Lieu :</strong> <%= @event.localisation %></p>
      <% end %>

      <% if @event.description.present? %>
        <div class="mt-3">
          <p><%= simple_format(@event.description) %></p>
        </div>
      <% end %>

    </div>
  </div>
  <div class="text-center mt-4 d-flex justify-content-center">
    <%= link_to "Retour à la liste des évènements",
            events_path,
            class: "btn btn-warning" %>
  </div>
</div>
<%= render "layouts/add_photo_modal",
           object: @event,
           modal_id: "addEventPhotoModal",
           form_url: add_photo_event_path(@event),
           title: "Ajouter une photo à cet événement" %>
